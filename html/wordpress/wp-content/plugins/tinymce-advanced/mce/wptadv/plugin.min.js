tinymce.PluginManager.add("wptadv",function(a){a.on("init",function(){a.formatter.register({valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}]}),!a.settings.wpautop&&a.settings.tadv_noautop&&a.on("SaveContent",function(a){var b=[new RegExp("https?://(www.)?youtube.com/watch.*","i"),new RegExp("http://youtu.be/*"),new RegExp("http://blip.tv/*"),new RegExp("https?://(www.)?vimeo.com/.*","i"),new RegExp("https?://(www.)?dailymotion.com/.*","i"),new RegExp("http://dai.ly/*"),new RegExp("https?://(www.)?flickr.com/.*","i"),new RegExp("http://flic.kr/*"),new RegExp("https?://(.+.)?smugmug.com/.*","i"),new RegExp("https?://(www.)?hulu.com/watch/.*","i"),new RegExp("https?://(www.)?viddler.com/.*","i"),new RegExp("http://qik.com/*"),new RegExp("http://revision3.com/*"),new RegExp("http://i*.photobucket.com/albums/*"),new RegExp("http://gi*.photobucket.com/groups/*"),new RegExp("https?://(www.)?scribd.com/.*","i"),new RegExp("http://wordpress.tv/*"),new RegExp("https?://(.+.)?polldaddy.com/.*","i"),new RegExp("https?://(www.)?funnyordie.com/videos/.*","i"),new RegExp("https?://(www.)?twitter.com/.+?/status(es)?/.*","i"),new RegExp("https?://(www.)?soundcloud.com/.*","i"),new RegExp("https?://(www.)?slideshare.net/*","i"),new RegExp("http://instagr(.am|am.com)/p/.*","i"),new RegExp("https?://(www.)?rdio.com/.*","i"),new RegExp("https?://rd.io/x/.*","i"),new RegExp("https?://(open|play).spotify.com/.*","i")];a.content=a.content.replace(/<p>(https?:\/\/[^<> "]+?)<\/p>/gi,function(a,c){for(var d in b)if(b[d].test(c))return"\n"+c+"\n";return a}).replace(/caption\]\[caption/g,"caption] [caption").replace(/<(object|audio|video)[\s\S]+?<\/\1>/g,function(a){return a.replace(/[\r\n]+/g," ")}).replace(/<pre[^>]*>[\s\S]+?<\/pre>/g,function(a){return a=a.replace(/<br ?\/?>(\r\n|\n)?/g,"\n"),a.replace(/<\/?p( [^>]*)?>(\r\n|\n)?/g,"\n")})})})});